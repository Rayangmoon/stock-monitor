# 快速开始指南

## 1. 安装依赖

```bash
npm install
```

## 2. 编译项目

```bash
npm run compile
```

## 3. 调试运行

在 VSCode 中：
1. 按 `F5` 启动调试
2. 会打开一个新的 VSCode 窗口（扩展开发主机）
3. 在新窗口中使用插件

## 4. 添加第一只监控股票

在扩展开发主机窗口中：

1. 按 `Ctrl+Shift+P`（Mac: `Cmd+Shift+P`）
2. 输入 `添加监控股票`
3. 输入股票代码，例如：`600000`（浦发银行）
4. 输入股票名称：`浦发银行`
5. 输入回落阈值：`2`（表示从最高点回落2%时提醒）

## 5. 查看监控状态

- 查看左下角状态栏，会显示 `$(eye) 股票监控 (1) 🔴+1.23%`
- 点击状态栏可查看详细信息

## 6. 常用命令

| 命令 | 快捷键 | 说明 |
|------|--------|------|
| 添加监控股票 | - | 添加新的股票到监控列表 |
| 移除监控股票 | - | 从列表中移除股票 |
| 查看监控列表 | - | 查看所有监控中的股票详情 |
| 启动/停止监控 | - | 切换监控开关 |

## 7. 配置说明

在 VSCode 设置中搜索 `stockMonitor`，可配置：

- **刷新间隔**：默认 3000 毫秒（3秒）
- **回落阈值**：默认 2%
- **数据源**：sina（新浪）或 xueqiu（雪球）

## 8. 测试示例

### 示例 1：监控浦发银行

```
股票代码：600000
股票名称：浦发银行
回落阈值：2%
```

### 示例 2：监控平安银行

```
股票代码：000001
股票名称：平安银行
回落阈值：3%
```

## 9. 提醒机制说明

假设：
- 开盘价：10.00 元
- 最高涨到：10.50 元（涨幅 5%）
- 当前价格：10.20 元（涨幅 2%）
- 回落幅度：5% - 2% = 3%

如果设置的回落阈值为 2%，则会触发提醒：

```
【浦发银行】回落提醒
最高涨幅: 5.00%
当前涨幅: 2.00%
回落幅度: 3.00%
当前价格: 10.20
```

## 10. 注意事项

1. 监控会在插件激活时自动启动（如果有配置的股票）
2. 同一只股票 5 分钟内只会提醒一次
3. 只有在股票有涨幅的情况下才会检测回落
4. 数据来源于第三方接口，可能有延迟

## 11. 故障排查

### 无法获取股票数据

- 检查网络连接
- 尝试切换数据源（新浪 ↔ 雪球）
- 确认股票代码格式正确（6位数字）

### 没有收到提醒

- 确认监控已启动（状态栏显示 `$(eye) 股票监控`）
- 检查回落阈值设置是否合理
- 确认股票当前有涨幅（只有涨了才会检测回落）

### 编译错误

```bash
# 清理并重新安装
rm -rf node_modules package-lock.json
npm install
npm run compile
```

## 12. 开发模式

### 监听文件变化自动编译

```bash
npm run watch
```

### 查看日志

在扩展开发主机窗口中：
1. 打开开发者工具：`帮助` -> `切换开发人员工具`
2. 查看 Console 标签页的日志输出

## 13. 打包发布

```bash
# 安装 vsce
npm install -g @vscode/vsce

# 打包
vsce package

# 会生成 stock-monitor-0.0.1.vsix 文件
```

安装 .vsix 文件：
1. VSCode 中打开扩展面板
2. 点击 `...` 菜单
3. 选择 `从 VSIX 安装...`
4. 选择生成的 .vsix 文件
